---
title: Appliance Level Utility Function Modeling
author: Jiaman Wu
date: 2022-05-01 00:00:00 +0800
categories: [Applied Computing]
tags: [Discrete Choice Modeling]
pin: False
math: true
mermaid: true
---

![oops](/assets/fig/pol-sol14738-170608.jpg){: .shadow width="1548" height="864" style="max-width: 80%" }


## Background

Electrical generation and transmission systems are generally sized to correspond to peak demand. To reduce peak demand or avoid system emergencies, we have two choices:

1. Add generation capabilities to meet the peak and occasional demand spikes

2. Add demand response (DR) program 

Among these two choices, the DR is more cost-effective. The underlying objective of DR is to actively engage customers in modifying their consumption in response to pricing signals. On the appliance lvel, services of appliances are reduced according to a preplanned load scheme during the critical time frames.

## Research Problem
To design a pricing scheme at appliance level, we should know how users value the appliance. The research problem is: modeling the appliance level utility functions of users. To do this, we need to solve two problems:

1. Among all appliances, which appliance is more important to the user?

2. For certain appliance, how the utility increases with the energy conusmption?

## Methodology

We will first indroduce the dataset we use and then we illustrate the utility model.

1. Data Overview

We use four data source here as the independent variables for the model.

- Energy: average of past week energy consumption associated with the appliance. 

![oops](/assets/fig/consumption.png){: .shadow width="1548" height="864" style="max-width: 90%" }
_Daily temperature in a year_

<br>

- Price: Tier price according to the Austin energy department.
- Entropy: For each appliance we convert energy consumption into a cumulative probability density function and assign values to different CDF curve shapes using Shannon entropy. 

![oops](/assets/fig/entropy.png){: .shadow width="1548" height="864" style="max-width: 90%" }
_Entropy for user's clothwasher_

<br>
- Temperature: The temperature in Austin during a year, obtained through API


![oops](/assets/fig/temperature.png){: .shadow width="1548" height="864" style="max-width: 90%" }
_Energy consumption for user's clothwasher_

<br>

2. Utility Model

Which appliance is more important to the user?
- Discrete Choice Model to estimate the value of energy.
    * Build the binary choice model. 
        - $U_{yes} = \beta_{0}+\beta_{energy} x_{energy} + \beta_{price} x_{price} + \beta_{entropy} x_{entropy} + \beta_{temperature} x_{temperature}$
        - $U_{no} = 0$
    * Willingness to pay. coefficient of energy consumption / coefficient of energy price.
        - $WTP = \frac{\beta_{energy}}{\beta_{price}}$
    * Value of energy. willingness to pay * maximum energy consumption  

For certain appliance, how the utility increases with the energy conusmption?
- Quadratic Utility Function $U = ax(b-x)$.
    * Rewrite as: $U = a'* (4/b^{2}) * x(b-x)$
    * Maximum energy consumption $b$: maximum energy consumption in past week.  
    * Scaler of the utility $a$: willness to pay for marginal increase in utility.

## Results

In this section we first illustrate the coefficients estimation for the discrete choice model and then we visualize the utility parameters of different users. 

1. Choice Model
From the perspective of value, increases in entropy and temperature lead to higher probability in using the appliance. Increases in consumption and electricity price lead to lower probability in using the appliance. From the perspective of significance, the entropy and electricity price is significant while the consumption and temperature is not significant.

| variable                       | coef     | std err | z      | P>\|z\| | [0.025  | 0.975] |
|--------------------------------|----------|---------|--------|---------|---------|--------|
| intersection                   | 0.3249   | 0.596   | 0.545  | 0.586   | -0.844  | 1.494  |
| entropy, units:/               | 0.5904   | 0.236   | 2.503  | 0.012   | 0.128   | 1.053  |
| consumption, units:kWh         | -2.6819  | 1.395   | -1.922 | 0.055   | -5.416  | 0.052  |
| electricity price, units:$/kWh | -12.6955 | 5.100   | -2.489 | 0.013   | -22.692 | -2.699 |
| temperature, units:C           | 0.0169   | 0.016   | 1.027  | 0.305   | -0.015  | 0.049  |

2. Utility Model
The most important parameters in the utility model is the $a'$, which is also the willingness to pay. From the perspective of mean value, the WTP is around 1 $/kWh, which makes sense. From the perspective of varaince, the valur is not very big for most of appliance, except microwave.

![oops](/assets/fig/wtp.png){: .shadow width="1548" height="864" style="max-width: 50%" }
_Willingness to pay for all users' appliance_

<br>

## Conclusion 
We have policy design insights of qualitative perspective and quantitative perspective.

1. Qualitative
When design the policy, we should consider the usage pattern of users (entropy and consumption). However, it is not enough. In mechanism design, the baseline of demand response is hard to estimate, since sometimes users will manipulate on their historical data to show a false baseline, so to obtain more benefits from the program. In this case, by estimating the willingness to pay for each appliance, it will be harder for the users to manipulate. 

2. Quantitative 
With the utility function, the system operator can optimize the social welfare by pluging in the users' utility values.

## Reference
[1] Aksanli, Baris, and Tajana Simunic Rosing. "Human behavior aware energy management in residential cyber-physical systems." IEEE Transactions on Emerging Topics in Computing 8.1 (2017): 45-57.

[2] Patnam, Bala Sai Kiran, and Naran M. Pindoriya. "Demand response in consumer-Centric electricity market: Mathematical models and optimization problems." Electric Power Systems Research 193 (2021): 106923.

[3] Brathwaite, T., & Walker, J. L. (2018). Asymmetric, closed-form, finite-parameter models of multinomial choice. Journal of Choice Modelling, 29, 78â€“112. https://doi.org/10.1016/j.jocm.2018.01.002

## Appendix

[**Jupyter Notebook for the Project**](https://github.com/charmainewu/charmainewu.github.io/blob/main/assets/fig/appliance_mining.ipynb)

